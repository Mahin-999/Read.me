<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBA Section 3B Dashboard Pro</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            transition: background-color 0.3s ease;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .animate-slide-in-right {
            animation: slideInRight 0.5s ease-out forwards;
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .animate-bounce {
            animation: bounce 1s infinite;
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        
        /* Progress bar animation */
        @keyframes progress {
            from { width: 0%; }
        }
        
        .progress-bar {
            animation: progress 1s ease-out forwards;
        }
        
        /* Glass morphism effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Dark mode styles */
        .dark {
            background-color: #0f172a;
            color: #e2e8f0;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        /* Notification toast */
        .toast {
            animation: slideInRight 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==================== ICONS ====================
        const IconClock = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>;
        const IconMapPin = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>;
        const IconUser = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>;
        const IconSparkles = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path></svg>;
        const IconMoon = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>;
        const IconSun = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>;
        const IconCalendar = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>;
        const IconBook = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>;
        const IconCheckCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>;
        const IconBell = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path></svg>;
        const IconTrendingUp = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>;
        const IconTarget = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>;
        const IconX = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>;
        const IconMenu = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>;

        // ==================== DATA ====================
        const SCHEDULE = [
            { day: 0, dayName: 'Sunday', startTime: '11:00', endTime: '12:30', code: 'MKT 2127', title: 'Principles of Marketing', room: '006 (MB)', faculty: 'SKG 2', color: 'blue' },
            { day: 0, dayName: 'Sunday', startTime: '13:00', endTime: '14:30', code: 'GED 1117', title: 'History of Bangladesh', room: '217 (MB)', faculty: 'GED 2 DMA', color: 'green' },
            { day: 0, dayName: 'Sunday', startTime: '16:00', endTime: '17:30', code: 'BIS 2122', title: 'Computer Applications', room: '501 (MB)', faculty: 'MZT 1', color: 'purple' },
            { day: 1, dayName: 'Monday', startTime: '11:00', endTime: '12:30', code: 'MAT 1110', title: 'Basic Math', room: '501 (MB)', faculty: 'MSB 2', color: 'orange' },
            { day: 2, dayName: 'Tuesday', startTime: '11:00', endTime: '12:30', code: 'MKT 2127', title: 'Principles of Marketing', room: '006 (MB)', faculty: 'SKG 2', color: 'blue' },
            { day: 2, dayName: 'Tuesday', startTime: '13:00', endTime: '14:30', code: 'GED 1117', title: 'History of Bangladesh', room: '217 (MB)', faculty: 'GED 2 DMA', color: 'green' },
            { day: 2, dayName: 'Tuesday', startTime: '16:00', endTime: '17:30', code: 'BIS 2122', title: 'Computer Applications', room: '501 (MB)', faculty: 'MZT 1', color: 'purple' },
            { day: 3, dayName: 'Wednesday', startTime: '11:00', endTime: '12:30', code: 'MAT 1110', title: 'Basic Math', room: '501 (MB)', faculty: 'MSB 2', color: 'orange' },
        ];

        const COLOR_SCHEMES = {
            blue: { bg: 'bg-blue-500', light: 'bg-blue-100', text: 'text-blue-600', border: 'border-blue-500' },
            green: { bg: 'bg-green-500', light: 'bg-green-100', text: 'text-green-600', border: 'border-green-500' },
            purple: { bg: 'bg-purple-500', light: 'bg-purple-100', text: 'text-purple-600', border: 'border-purple-500' },
            orange: { bg: 'bg-orange-500', light: 'bg-orange-100', text: 'text-orange-600', border: 'border-orange-500' },
        };

        // ==================== COMPONENTS ====================
        
        // Toast Notification Component
        function Toast({ message, type = 'info', onClose }) {
            useEffect(() => {
                const timer = setTimeout(onClose, 4000);
                return () => clearTimeout(timer);
            }, [onClose]);

            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';

            return (
                <div className={`toast fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 z-50`}>
                    <IconCheckCircle className="w-5 h-5" />
                    <span className="font-medium">{message}</span>
                    <button onClick={onClose} className="ml-2 hover:opacity-70">
                        <IconX className="w-4 h-4" />
                    </button>
                </div>
            );
        }

        // Progress Circle Component
        function ProgressCircle({ percentage, size = 80, strokeWidth = 8 }) {
            const radius = (size - strokeWidth) / 2;
            const circumference = radius * 2 * Math.PI;
            const offset = circumference - (percentage / 100) * circumference;

            return (
                <svg width={size} height={size} className="transform -rotate-90">
                    <circle
                        cx={size / 2}
                        cy={size / 2}
                        r={radius}
                        stroke="currentColor"
                        strokeWidth={strokeWidth}
                        fill="none"
                        className="text-slate-200 dark:text-slate-700"
                    />
                    <circle
                        cx={size / 2}
                        cy={size / 2}
                        r={radius}
                        stroke="currentColor"
                        strokeWidth={strokeWidth}
                        fill="none"
                        strokeDasharray={circumference}
                        strokeDashoffset={offset}
                        className="text-violet-500 transition-all duration-1000 ease-out"
                        strokeLinecap="round"
                    />
                </svg>
            );
        }

        // ==================== MAIN APP ====================
        function App() {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [currentStatus, setCurrentStatus] = useState(null);
            const [nextClass, setNextClass] = useState(null);
            const [loadingAI, setLoadingAI] = useState(false);
            const [aiResponse, setAiResponse] = useState(null);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [darkMode, setDarkMode] = useState(false);
            const [notifications, setNotifications] = useState([]);
            const [attendance, setAttendance] = useState(() => {
                const saved = localStorage.getItem('attendance');
                return saved ? JSON.parse(saved) : {};
            });
            const [showStats, setShowStats] = useState(false);

            const apiKey = ""; // Add your Gemini API key here

            // Initialize dark mode from localStorage
            useEffect(() => {
                const savedDarkMode = localStorage.getItem('darkMode') === 'true';
                setDarkMode(savedDarkMode);
                if (savedDarkMode) {
                    document.documentElement.classList.add('dark');
                }
            }, []);

            // Update time every second
            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            // Calculate status whenever time changes
            useEffect(() => {
                calculateStatus();
            }, [currentTime]);

            // Save attendance to localStorage
            useEffect(() => {
                localStorage.setItem('attendance', JSON.stringify(attendance));
            }, [attendance]);

            const toggleDarkMode = () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                localStorage.setItem('darkMode', newMode);
                if (newMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            };

            const addNotification = (message, type = 'info') => {
                const id = Date.now();
                setNotifications(prev => [...prev, { id, message, type }]);
            };

            const removeNotification = (id) => {
                setNotifications(prev => prev.filter(n => n.id !== id));
            };

            const markAttendance = (classCode, date, present) => {
                const key = `${classCode}-${date}`;
                setAttendance(prev => ({
                    ...prev,
                    [key]: present
                }));
                addNotification(
                    present ? 'Attendance marked as present âœ“' : 'Attendance marked as absent',
                    present ? 'success' : 'info'
                );
            };

            const calculateAttendancePercentage = (classCode) => {
                const records = Object.entries(attendance).filter(([key]) => key.startsWith(classCode));
                if (records.length === 0) return 0;
                const present = records.filter(([, value]) => value === true).length;
                return Math.round((present / records.length) * 100);
            };

            const calculateStatus = () => {
                const now = new Date();
                const currentDay = now.getDay();
                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentTimeValue = currentHour * 60 + currentMinute;

                // Check for active class
                const activeClass = SCHEDULE.find(cls => {
                    if (cls.day !== currentDay) return false;
                    const [startH, startM] = cls.startTime.split(':').map(Number);
                    const [endH, endM] = cls.endTime.split(':').map(Number);
                    return currentTimeValue >= (startH * 60 + startM) && currentTimeValue < (endH * 60 + endM);
                });

                if (activeClass) {
                    setCurrentStatus({ type: 'active', class: activeClass });
                    setNextClass(findNextClass(currentDay, currentTimeValue));
                    return;
                }

                // Check for upcoming classes today
                const upcomingToday = SCHEDULE.filter(cls => {
                    if (cls.day !== currentDay) return false;
                    const [startH, startM] = cls.startTime.split(':').map(Number);
                    return (startH * 60 + startM) > currentTimeValue;
                }).sort((a, b) => {
                    const [aH, aM] = a.startTime.split(':').map(Number);
                    const [bH, bM] = b.startTime.split(':').map(Number);
                    return (aH * 60 + aM) - (bH * 60 + bM);
                });

                if (upcomingToday.length > 0) {
                    const next = upcomingToday[0];
                    const [startH, startM] = next.startTime.split(':').map(Number);
                    const minutesUntil = (startH * 60 + startM) - currentTimeValue;
                    setCurrentStatus({ type: 'upcoming', class: next, minutesUntil });
                    setNextClass(upcomingToday[1] || findNextClass(currentDay, currentTimeValue));
                    return;
                }

                // No classes today - find next class
                const nextCls = findNextClass(currentDay, currentTimeValue);
                setCurrentStatus({ type: 'free' });
                setNextClass(nextCls);
            };

            const findNextClass = (currentDay, currentTimeValue) => {
                for (let i = 1; i <= 7; i++) {
                    const checkDay = (currentDay + i) % 7;
                    const classes = SCHEDULE.filter(c => c.day === checkDay).sort((a, b) => {
                        const [aH, aM] = a.startTime.split(':').map(Number);
                        const [bH, bM] = b.startTime.split(':').map(Number);
                        return (aH * 60 + aM) - (bH * 60 + bM);
                    });
                    if (classes.length > 0) return classes[0];
                }
                return null;
            };

            const getAiStudyTips = async (subject) => {
                if (!apiKey) {
                    addNotification('Please add your Gemini API key', 'error');
                    return;
                }

                setLoadingAI(true);
                try {
                    const prompt = `As a study advisor, give 3 concise, actionable study tips for ${subject} for BBA students. Keep it under 150 words and format as numbered points.`;
                    
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }]
                        })
                    });

                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text || 'No tips available';
                    
                    setAiResponse({ course: subject, text });
                    addNotification('Study tips generated successfully!', 'success');
                } catch (error) {
                    console.error('AI Error:', error);
                    addNotification('Failed to generate tips', 'error');
                } finally {
                    setLoadingAI(false);
                }
            };

            const formatTime = (date) => {
                return date.toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true 
                });
            };

            const formatDate = (date) => {
                return date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            };

            const getTodayDate = () => {
                return currentTime.toISOString().split('T')[0];
            };

            const getWeeklyStats = () => {
                const totalClasses = SCHEDULE.length;
                const uniqueCourses = [...new Set(SCHEDULE.map(c => c.code))].length;
                const totalHours = SCHEDULE.reduce((sum, cls) => {
                    const [startH, startM] = cls.startTime.split(':').map(Number);
                    const [endH, endM] = cls.endTime.split(':').map(Number);
                    return sum + ((endH * 60 + endM) - (startH * 60 + startM)) / 60;
                }, 0);

                const attendanceRecords = Object.values(attendance);
                const attendanceRate = attendanceRecords.length > 0 
                    ? Math.round((attendanceRecords.filter(a => a).length / attendanceRecords.length) * 100)
                    : 0;

                return { totalClasses, uniqueCourses, totalHours: totalHours.toFixed(1), attendanceRate };
            };

            const stats = getWeeklyStats();

            return (
                <div className={`min-h-screen transition-colors duration-300 ${darkMode ? 'dark bg-slate-900' : 'bg-slate-50'}`}>
                    {/* Notifications */}
                    <div className="fixed top-4 right-4 z-50 space-y-2">
                        {notifications.map(notification => (
                            <Toast
                                key={notification.id}
                                message={notification.message}
                                type={notification.type}
                                onClose={() => removeNotification(notification.id)}
                            />
                        ))}
                    </div>

                    {/* Header */}
                    <header className={`sticky top-0 z-40 ${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'} border-b shadow-sm`}>
                        <div className="max-w-5xl mx-auto px-4 py-4">
                            <div className="flex justify-between items-center">
                                <div className="flex items-center gap-3">
                                    <div className="bg-gradient-to-br from-violet-500 to-purple-600 p-2 rounded-lg">
                                        <IconBook className="w-6 h-6 text-white" />
                                    </div>
                                    <div>
                                        <h1 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-slate-800'}`}>
                                            BBA Section 3B
                                        </h1>
                                        <p className={`text-xs ${darkMode ? 'text-slate-400' : 'text-slate-500'}`}>
                                            {formatTime(currentTime)}
                                        </p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-2">
                                    <button
                                        onClick={toggleDarkMode}
                                        className={`p-2 rounded-lg transition-colors ${
                                            darkMode 
                                                ? 'bg-slate-700 text-yellow-400 hover:bg-slate-600' 
                                                : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                                        }`}
                                    >
                                        {darkMode ? <IconSun className="w-5 h-5" /> : <IconMoon className="w-5 h-5" />}
                                    </button>
                                    <button
                                        onClick={() => setShowStats(!showStats)}
                                        className={`p-2 rounded-lg transition-colors ${
                                            darkMode 
                                                ? 'bg-slate-700 text-slate-300 hover:bg-slate-600' 
                                                : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                                        }`}
                                    >
                                        <IconTrendingUp className="w-5 h-5" />
                                    </button>
                                </div>
                            </div>

                            {/* Stats Panel */}
                            {showStats && (
                                <div className="mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 animate-fade-in-up">
                                    <div className={`${darkMode ? 'bg-slate-700' : 'bg-violet-50'} rounded-lg p-3`}>
                                        <div className={`text-2xl font-bold ${darkMode ? 'text-violet-400' : 'text-violet-600'}`}>
                                            {stats.totalClasses}
                                        </div>
                                        <div className={`text-xs ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                            Total Classes
                                        </div>
                                    </div>
                                    <div className={`${darkMode ? 'bg-slate-700' : 'bg-blue-50'} rounded-lg p-3`}>
                                        <div className={`text-2xl font-bold ${darkMode ? 'text-blue-400' : 'text-blue-600'}`}>
                                            {stats.uniqueCourses}
                                        </div>
                                        <div className={`text-xs ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                            Courses
                                        </div>
                                    </div>
                                    <div className={`${darkMode ? 'bg-slate-700' : 'bg-green-50'} rounded-lg p-3`}>
                                        <div className={`text-2xl font-bold ${darkMode ? 'text-green-400' : 'text-green-600'}`}>
                                            {stats.totalHours}h
                                        </div>
                                        <div className={`text-xs ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                            Weekly Hours
                                        </div>
                                    </div>
                                    <div className={`${darkMode ? 'bg-slate-700' : 'bg-orange-50'} rounded-lg p-3`}>
                                        <div className={`text-2xl font-bold ${darkMode ? 'text-orange-400' : 'text-orange-600'}`}>
                                            {stats.attendanceRate}%
                                        </div>
                                        <div className={`text-xs ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                            Attendance
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </header>

                    {/* Tab Navigation */}
                    <nav className={`sticky top-[73px] z-30 ${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200'} border-b`}>
                        <div className="max-w-5xl mx-auto px-4">
                            <div className="flex gap-1">
                                {[
                                    { id: 'dashboard', label: 'Dashboard', icon: IconTarget },
                                    { id: 'schedule', label: 'Schedule', icon: IconCalendar },
                                    { id: 'attendance', label: 'Attendance', icon: IconCheckCircle }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center gap-2 px-4 py-3 font-medium text-sm transition-colors border-b-2 ${
                                            activeTab === tab.id
                                                ? darkMode
                                                    ? 'text-violet-400 border-violet-400'
                                                    : 'text-violet-600 border-violet-600'
                                                : darkMode
                                                    ? 'text-slate-400 border-transparent hover:text-slate-300'
                                                    : 'text-slate-500 border-transparent hover:text-slate-700'
                                        }`}
                                    >
                                        <tab.icon className="w-4 h-4" />
                                        <span className="hidden sm:inline">{tab.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </nav>

                    {/* Main Content */}
                    <main className="max-w-5xl mx-auto px-4 py-6">
                        {activeTab === 'dashboard' && (
                            <div className="space-y-6">
                                {/* Current Date */}
                                <div className={`${darkMode ? 'text-slate-300' : 'text-slate-600'} text-sm animate-fade-in-up`}>
                                    {formatDate(currentTime)}
                                </div>

                                {/* Current Status Card */}
                                <div className="animate-fade-in-up">
                                    {currentStatus?.type === 'active' && (
                                        <div className={`${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100'} rounded-2xl shadow-lg border p-6`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div>
                                                    <span className="inline-flex items-center gap-1 text-xs font-bold bg-green-100 text-green-600 px-3 py-1 rounded-full mb-2">
                                                        <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                                        LIVE NOW
                                                    </span>
                                                    <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-slate-800'}`}>
                                                        {currentStatus.class.title}
                                                    </h2>
                                                    <p className={`${darkMode ? 'text-slate-400' : 'text-slate-500'} text-sm mt-1`}>
                                                        {currentStatus.class.code}
                                                    </p>
                                                </div>
                                                <div className={`p-3 rounded-xl ${COLOR_SCHEMES[currentStatus.class.color].light}`}>
                                                    <IconBook className={`w-6 h-6 ${COLOR_SCHEMES[currentStatus.class.color].text}`} />
                                                </div>
                                            </div>
                                            <div className={`grid grid-cols-3 gap-4 pt-4 border-t ${darkMode ? 'border-slate-700' : 'border-slate-100'}`}>
                                                <div className="flex items-center gap-2">
                                                    <IconClock className={`w-4 h-4 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`} />
                                                    <span className={`text-sm ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                        {currentStatus.class.startTime} - {currentStatus.class.endTime}
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <IconMapPin className={`w-4 h-4 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`} />
                                                    <span className={`text-sm ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                        {currentStatus.class.room}
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <IconUser className={`w-4 h-4 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`} />
                                                    <span className={`text-sm ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                        {currentStatus.class.faculty}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {currentStatus?.type === 'upcoming' && (
                                        <div className={`${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100'} rounded-2xl shadow-lg border p-6`}>
                                            <div className="flex items-start justify-between mb-4">
                                                <div>
                                                    <span className="inline-flex items-center gap-1 text-xs font-bold bg-blue-100 text-blue-600 px-3 py-1 rounded-full mb-2">
                                                        <IconBell className="w-3 h-3" />
                                                        UPCOMING
                                                    </span>
                                                    <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-slate-800'}`}>
                                                        {currentStatus.class.title}
                                                    </h2>
                                                    <p className={`${darkMode ? 'text-blue-400' : 'text-blue-600'} text-sm font-semibold mt-1`}>
                                                        Starts in {currentStatus.minutesUntil} minutes
                                                    </p>
                                                </div>
                                                <div className={`p-3 rounded-xl ${COLOR_SCHEMES[currentStatus.class.color].light}`}>
                                                    <IconClock className={`w-6 h-6 ${COLOR_SCHEMES[currentStatus.class.color].text}`} />
                                                </div>
                                            </div>
                                            <div className={`grid grid-cols-3 gap-4 pt-4 border-t ${darkMode ? 'border-slate-700' : 'border-slate-100'}`}>
                                                <div className="flex items-center gap-2">
                                                    <IconClock className={`w-4 h-4 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`} />
                                                    <span className={`text-sm ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                        {currentStatus.class.startTime}
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <IconMapPin className={`w-4 h-4 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`} />
                                                    <span className={`text-sm ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                        {currentStatus.class.room}
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <IconUser className={`w-4 h-4 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`} />
                                                    <span className={`text-sm ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                        {currentStatus.class.faculty}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {currentStatus?.type === 'free' && (
                                        <div className="bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-2xl shadow-lg p-8 text-center">
                                            <div className="animate-bounce mb-3">
                                                <IconMoon className="w-12 h-12 mx-auto opacity-90" />
                                            </div>
                                            <h3 className="text-2xl font-bold mb-2">You're Free! ðŸŽ‰</h3>
                                            <p className="text-indigo-100 text-sm">
                                                No classes currently scheduled. Time to relax or catch up on studies!
                                            </p>
                                        </div>
                                    )}
                                </div>

                                {/* Next Class */}
                                {nextClass && (
                                    <div className="animate-fade-in-up delay-100">
                                        <h2 className={`text-xs font-bold ${darkMode ? 'text-slate-400' : 'text-slate-500'} uppercase tracking-widest mb-3`}>
                                            Up Next
                                        </h2>
                                        <div className={`${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100'} rounded-xl shadow-sm border p-4 hover:shadow-md transition-shadow`}>
                                            <div className="flex justify-between items-start mb-2">
                                                <span className={`text-xs font-bold ${darkMode ? 'bg-slate-700 text-slate-300' : 'bg-slate-100 text-slate-600'} px-2 py-1 rounded uppercase`}>
                                                    {nextClass.dayName}
                                                </span>
                                                <span className={`font-mono font-bold ${darkMode ? 'text-slate-300' : 'text-slate-700'}`}>
                                                    {nextClass.startTime}
                                                </span>
                                            </div>
                                            <h3 className={`font-bold ${darkMode ? 'text-white' : 'text-slate-800'} mb-2`}>
                                                {nextClass.title}
                                            </h3>
                                            <div className="flex items-center gap-3 text-sm">
                                                <div className={`flex items-center gap-1 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`}>
                                                    <IconMapPin className="w-3 h-3" />
                                                    {nextClass.room}
                                                </div>
                                                <div className={`flex items-center gap-1 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`}>
                                                    <IconUser className="w-3 h-3" />
                                                    {nextClass.faculty}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* AI Study Advisor */}
                                <div className="animate-fade-in-up delay-200">
                                    <div className="bg-gradient-to-br from-violet-600 to-indigo-700 rounded-2xl p-6 text-white shadow-xl relative overflow-hidden">
                                        <div className="absolute top-0 right-0 w-40 h-40 bg-white opacity-5 rounded-full -mr-20 -mt-20"></div>
                                        <div className="relative z-10">
                                            <div className="flex items-center gap-2 mb-4">
                                                <IconSparkles className="w-6 h-6 text-amber-300" />
                                                <h2 className="text-lg font-bold">AI Study Advisor</h2>
                                            </div>
                                            {!aiResponse ? (
                                                <>
                                                    <p className="text-indigo-100 text-sm mb-4">
                                                        Get personalized study tips powered by AI. Select a subject below:
                                                    </p>
                                                    <div className="grid grid-cols-2 gap-2">
                                                        {['Marketing', 'History', 'Comp Apps', 'Basic Math'].map(subject => (
                                                            <button
                                                                key={subject}
                                                                disabled={loadingAI}
                                                                onClick={() => getAiStudyTips(subject)}
                                                                className="bg-white/10 hover:bg-white/20 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-sm font-semibold py-3 px-4 rounded-lg border border-white/20"
                                                            >
                                                                {subject}
                                                            </button>
                                                        ))}
                                                    </div>
                                                </>
                                            ) : (
                                                <div className="bg-white/10 rounded-xl p-4 border border-white/20">
                                                    <div className="flex justify-between items-start mb-3">
                                                        <span className="text-sm font-bold text-amber-300 uppercase">
                                                            {aiResponse.course} Study Tips
                                                        </span>
                                                        <button
                                                            onClick={() => setAiResponse(null)}
                                                            className="text-white/70 hover:text-white transition-colors"
                                                        >
                                                            <IconX className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                    <div className="text-sm text-indigo-50 leading-relaxed whitespace-pre-wrap">
                                                        {aiResponse.text}
                                                    </div>
                                                </div>
                                            )}
                                            {loadingAI && (
                                                <div className="absolute inset-0 bg-indigo-900/90 backdrop-blur-sm flex items-center justify-center rounded-2xl">
                                                    <div className="text-center">
                                                        <div className="animate-spin rounded-full h-12 w-12 border-4 border-amber-300 border-t-transparent mx-auto mb-3"></div>
                                                        <div className="text-sm font-semibold text-amber-300">
                                                            Generating tips...
                                                        </div>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'schedule' && (
                            <div className="space-y-6 animate-fade-in-up">
                                {[0, 1, 2, 3].map(dayIdx => {
                                    const dayName = ['Sunday', 'Monday', 'Tuesday', 'Wednesday'][dayIdx];
                                    const classes = SCHEDULE.filter(c => c.day === dayIdx);
                                    if (classes.length === 0) return null;

                                    return (
                                        <div key={dayIdx}>
                                            <h3 className={`font-bold ${darkMode ? 'text-slate-400' : 'text-slate-500'} text-sm uppercase tracking-wider mb-3 sticky top-[145px] ${darkMode ? 'bg-slate-900' : 'bg-slate-50'} py-2 z-20`}>
                                                {dayName}
                                            </h3>
                                            <div className="space-y-3">
                                                {classes.map((cls, idx) => {
                                                    const colors = COLOR_SCHEMES[cls.color];
                                                    return (
                                                        <div
                                                            key={idx}
                                                            className={`${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white'} p-5 rounded-xl shadow-sm border-l-4 ${colors.border} hover:shadow-md transition-all`}
                                                        >
                                                            <div className="flex justify-between items-start mb-3">
                                                                <div>
                                                                    <h4 className={`font-bold text-lg ${darkMode ? 'text-white' : 'text-slate-800'} mb-1`}>
                                                                        {cls.title}
                                                                    </h4>
                                                                    <span className={`text-xs font-mono ${darkMode ? 'bg-slate-700 text-slate-300' : 'bg-slate-100 text-slate-600'} px-2 py-1 rounded`}>
                                                                        {cls.code}
                                                                    </span>
                                                                </div>
                                                                <div className={`p-2 rounded-lg ${colors.light}`}>
                                                                    <IconBook className={`w-5 h-5 ${colors.text}`} />
                                                                </div>
                                                            </div>
                                                            <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                                                <div className={`flex items-center gap-2 text-sm ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                                                    <IconClock className="w-4 h-4" />
                                                                    {cls.startTime} - {cls.endTime}
                                                                </div>
                                                                <div className={`flex items-center gap-2 text-sm ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                                                    <IconMapPin className="w-4 h-4" />
                                                                    {cls.room}
                                                                </div>
                                                                <div className={`flex items-center gap-2 text-sm ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                                                    <IconUser className="w-4 h-4" />
                                                                    {cls.faculty}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    );
                                })}
                                <div className={`text-center ${darkMode ? 'text-slate-400' : 'text-slate-500'} text-sm py-8 italic`}>
                                    Thursday, Friday & Saturday are off! ðŸŽ‰
                                </div>
                            </div>
                        )}

                        {activeTab === 'attendance' && (
                            <div className="space-y-6 animate-fade-in-up">
                                {/* Attendance Overview */}
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    {[...new Set(SCHEDULE.map(c => c.code))].map(code => {
                                        const percentage = calculateAttendancePercentage(code);
                                        const course = SCHEDULE.find(c => c.code === code);
                                        const colors = COLOR_SCHEMES[course.color];
                                        
                                        return (
                                            <div key={code} className={`${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100'} rounded-xl shadow-sm border p-4 text-center`}>
                                                <div className="relative inline-flex items-center justify-center mb-3">
                                                    <ProgressCircle percentage={percentage} size={60} strokeWidth={6} />
                                                    <div className="absolute inset-0 flex items-center justify-center">
                                                        <span className={`text-lg font-bold ${darkMode ? 'text-white' : 'text-slate-700'}`}>
                                                            {percentage}%
                                                        </span>
                                                    </div>
                                                </div>
                                                <div className={`text-xs font-mono ${darkMode ? 'text-slate-400' : 'text-slate-600'} mb-1`}>
                                                    {code}
                                                </div>
                                                <div className={`text-xs ${darkMode ? 'text-slate-500' : 'text-slate-500'}`}>
                                                    {course.title.split(' ').slice(0, 2).join(' ')}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* Mark Attendance */}
                                <div className={`${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-100'} rounded-xl shadow-sm border p-6`}>
                                    <h3 className={`text-lg font-bold ${darkMode ? 'text-white' : 'text-slate-800'} mb-4`}>
                                        Mark Today's Attendance
                                    </h3>
                                    <div className="space-y-3">
                                        {SCHEDULE.filter(c => c.day === currentTime.getDay()).map((cls, idx) => {
                                            const todayDate = getTodayDate();
                                            const key = `${cls.code}-${todayDate}`;
                                            const marked = attendance[key];
                                            const colors = COLOR_SCHEMES[cls.color];

                                            return (
                                                <div
                                                    key={idx}
                                                    className={`${darkMode ? 'bg-slate-700' : 'bg-slate-50'} rounded-lg p-4 flex justify-between items-center`}
                                                >
                                                    <div>
                                                        <div className={`font-semibold ${darkMode ? 'text-white' : 'text-slate-800'}`}>
                                                            {cls.title}
                                                        </div>
                                                        <div className={`text-xs ${darkMode ? 'text-slate-400' : 'text-slate-500'} mt-1`}>
                                                            {cls.startTime} - {cls.endTime}
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => markAttendance(cls.code, todayDate, true)}
                                                            className={`px-4 py-2 rounded-lg font-medium text-sm transition-all ${
                                                                marked === true
                                                                    ? 'bg-green-500 text-white'
                                                                    : darkMode
                                                                        ? 'bg-slate-600 text-slate-300 hover:bg-slate-500'
                                                                        : 'bg-white text-slate-600 hover:bg-slate-100'
                                                            }`}
                                                        >
                                                            Present
                                                        </button>
                                                        <button
                                                            onClick={() => markAttendance(cls.code, todayDate, false)}
                                                            className={`px-4 py-2 rounded-lg font-medium text-sm transition-all ${
                                                                marked === false
                                                                    ? 'bg-red-500 text-white'
                                                                    : darkMode
                                                                        ? 'bg-slate-600 text-slate-300 hover:bg-slate-500'
                                                                        : 'bg-white text-slate-600 hover:bg-slate-100'
                                                            }`}
                                                        >
                                                            Absent
                                                        </button>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                        {SCHEDULE.filter(c => c.day === currentTime.getDay()).length === 0 && (
                                            <div className={`text-center py-8 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`}>
                                                No classes today! ðŸŽ‰
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    {/* Footer */}
                    <footer className={`mt-12 py-6 text-center ${darkMode ? 'text-slate-500' : 'text-slate-400'} text-xs`}>
                        <p>BBA Section 3B Dashboard â€¢ Made with â¤ï¸ by Claude</p>
                    </footer>
                </div>
            );
        }

        // Render App
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
